<nav class="nav">
  <!-- Main Items -->
  @for (item of mainItems; track item.route) {
    <a
      [routerLink]="item.route"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: !!item.exact }"
      class="nav-link"
      (click)="closeDropdown()"
    >
      <app-icon [name]="item.icon" class="nav-icon" />
      <span class="nav-label">{{ item.label }}</span>
    </a>
  }

  <!-- Dropdown Groups -->
  @for (group of groups; track group.label) {
    <div class="nav-dropdown" [class.open]="openDropdown() === group.label">
      <button
        class="nav-link dropdown-trigger"
        [class.active]="isGroupActive(group)"
        (click)="toggleDropdown(group.label)"
        type="button"
      >
        <app-icon [name]="group.icon" class="nav-icon" />
        <span class="nav-label">{{ group.label }}</span>
        <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
          <path d="M6 8L2 4h8z"/>
        </svg>
      </button>

      <div class="dropdown-menu">
        @for (item of group.items; track item.route) {
          <a
            [routerLink]="item.route"
            routerLinkActive="active"
            class="dropdown-item"
            (click)="closeDropdown()"
          >
            <app-icon [name]="item.icon" class="dropdown-icon" />
            <span class="dropdown-label">{{ item.label }}</span>
          </a>
        }
      </div>
    </div>
  }
</nav>
